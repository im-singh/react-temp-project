[{"C:\\Users\\mohinder\\Desktop\\temp\\react-temp-project\\src\\ChatApp\\ChatApp.js":"1","C:\\Users\\mohinder\\Desktop\\temp\\react-temp-project\\src\\ChatApp\\RenderUsers.js":"2","C:\\Users\\mohinder\\Desktop\\temp\\react-temp-project\\src\\ChatApp\\RenderMessages.js":"3","C:\\Users\\mohinder\\Desktop\\temp\\react-temp-project\\src\\ChatApp\\SelectedUser.js":"4","C:\\Users\\mohinder\\Desktop\\temp\\react-temp-project\\src\\Material-ui\\HiddenPage.js":"5","C:\\Users\\mohinder\\Desktop\\temp\\react-temp-project\\src\\App.js":"6","C:\\Users\\mohinder\\Desktop\\temp\\react-temp-project\\src\\Material-ui\\MaterialUI.js":"7","C:\\Users\\mohinder\\Desktop\\temp\\react-temp-project\\src\\Material-ui\\ClassPage.js":"8"},{"size":4404,"mtime":1617691772218,"results":"9","hashOfConfig":"10"},{"size":495,"mtime":1617687782022,"results":"11","hashOfConfig":"10"},{"size":1097,"mtime":1617693246824,"results":"12","hashOfConfig":"10"},{"size":254,"mtime":1617690152940,"results":"13","hashOfConfig":"10"},{"size":440,"mtime":1617697261237,"results":"14","hashOfConfig":"10"},{"size":2312,"mtime":1617696488547,"results":"15","hashOfConfig":"10"},{"size":605,"mtime":1617704878486,"results":"16","hashOfConfig":"10"},{"size":1402,"mtime":1617704157673,"results":"17","hashOfConfig":"10"},{"filePath":"18","messages":"19","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"20"},"6v62x",{"filePath":"21","messages":"22","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"23","messages":"24","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"25"},{"filePath":"26","messages":"27","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"28","messages":"29","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"30","messages":"31","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"32","messages":"33","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"34","messages":"35","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"36"},"C:\\Users\\mohinder\\Desktop\\temp\\react-temp-project\\src\\ChatApp\\ChatApp.js",["37","38","39"],"import React, { Fragment, useEffect, useState } from 'react';\r\nimport SC from '../SocketExample/socket';\r\nimport RenderUsers from './RenderUsers';\r\nimport RenderMessages from './RenderMessages';\r\nimport SelectedUser from './SelectedUser';\r\n\r\n\r\nexport default function ChatApp() {\r\n    const [isConnected, setConnection] = useState(false);\r\n    const [username, setUserName] = useState('');\r\n    const [users, setUsers] = useState([]);\r\n    const [self, setSelf] = useState({});\r\n    const [selectedUser, selectUserToMsg] = useState({});\r\n    const [message, setMessage] = useState('');\r\n    const [msgList, setMsgList] = useState([]);\r\n\r\n\r\n    useEffect(() => {\r\n        SC.subscribeToEvent(\"private_message\", handleMessage);\r\n        SC.subscribeToEvent(\"connect_error\", handleSocketError);\r\n        SC.subscribeToEvent(\"users\", handleUsers);\r\n        SC.subscribeToEvent(\"user_connected\", handleNewUser);\r\n        return () => {\r\n            SC.unsubscribeFromEvent(\"private_message\", handleMessage);\r\n            SC.unsubscribeFromEvent(\"connect_error\", handleSocketError);\r\n            SC.unsubscribeFromEvent(\"users\", handleUsers);\r\n            SC.unsubscribeFromEvent(\"user_connected\", handleNewUser);\r\n        };\r\n    }, [isConnected, users, msgList]);\r\n  \r\n    const connectToSocket = () => {\r\n        // console.log(\"username: \", username);\r\n        SC.connectSocket(username);\r\n        setConnection(true)\r\n    }\r\n    const handleMessage = (data) => {\r\n        // // console.log('Content: ', content, from);\r\n        // let sender = users.filter(ele => ele.userID === from);\r\n        // // console.log(\"sernder: \", sender);\r\n        // let newObj = { ...sender[0] }\r\n        // // let newObj = sender[0]\r\n        // // console.log(\"newOJB: \", newObj)\r\n        // let msg = { sender: newObj, content };\r\n        addMessageToList(data);\r\n    }\r\n    const addMessageToList=(msg)=>{\r\n        let newList = [...msgList];\r\n        newList.push(msg);\r\n        setMsgList(newList);\r\n    }\r\n    const handleNewUser = (user) => {\r\n        // console.log(\"ðŸš€ ~ file: ChatApp.js ~ line 44 ~ handleNewUser ~ user\", user)\r\n        console.log(\"hNU: \", users, user);\r\n        let otherUsers = [...users, user]\r\n        setUsers(otherUsers);\r\n    }\r\n    const handleUsers = (users) => {\r\n        let id = SC.returnId();\r\n        let otherUsers = [];\r\n        users.forEach(u => {\r\n            if (id === u.userID) {\r\n                setSelf(u);\r\n            }\r\n            else {\r\n                otherUsers.push(u);\r\n            }\r\n        })\r\n        console.log(\"ohters; \", otherUsers);\r\n        setUsers(otherUsers);\r\n    }\r\n    const handleSocketError = (err) => {\r\n        console.log(\"ERR: Socket: \", err);\r\n    }\r\n    const selectUser = v => {\r\n        // console.log(\"ðŸš€ ~ file: ChatApp.js ~ line 55 ~ ChatApp ~ v\", v)\r\n        selectUserToMsg(v);\r\n    }\r\n    const sendMessage = () => {\r\n\r\n        let msg={content:message,sender:self.userID,reciver:selectedUser.userID};\r\n        addMessageToList(msg);\r\n        SC.emitAction(\"private_message\", msg)\r\n    }\r\n    const showUser = () => {\r\n        console.log(\"showusers; \", users);\r\n    }\r\n    \r\n    return (\r\n        <div className=\"chat-container\">\r\n            {!isConnected && <div>\r\n                Connect to user:\r\n                <input type=\"text\" onChange={(e) => setUserName(e.target.value)} />\r\n                <button onClick={connectToSocket}>connect</button>\r\n            </div>\r\n            }\r\n            <div className=\"self\">\r\n                User:<span>{self.username}</span>\r\n            </div>\r\n            <div className=\"chat-box\">\r\n                <div className=\"users\">\r\n                    <RenderUsers \r\n                        otherUsers={users} \r\n                        selectedUser={selectedUser}\r\n                        selectUser={selectUser} \r\n                    />\r\n                </div>\r\n                <div className=\"messages\">\r\n                    <SelectedUser user={selectedUser}/>\r\n                    <RenderMessages msgList={msgList} selfUser={self} selectedUser={selectedUser}/>\r\n\r\n                    <div className=\"message-box\">\r\n                        <input type=\"text\" onChange={(e) => setMessage(e.target.value)} />\r\n                        <button onClick={sendMessage}>Send</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n    );\r\n}\r\n","C:\\Users\\mohinder\\Desktop\\temp\\react-temp-project\\src\\ChatApp\\RenderUsers.js",[],"C:\\Users\\mohinder\\Desktop\\temp\\react-temp-project\\src\\ChatApp\\RenderMessages.js",["40"],"import React, { useEffect } from 'react';\r\n\r\nfunction RenderMessages({ msgList,selfUser,selectedUser }) {\r\n\r\n    const isSent=(ele)=>{\r\n        return ele.sender===selfUser.userID?\"right\":\"left\";\r\n    }\r\n    const renderMessage=(ele,idx)=>{\r\n        let senderId=ele.sender;\r\n        let reciverId=ele.reciver;\r\n        console.log(\"msg: \",ele)\r\n        console.log(\"self: selected: \",selfUser,selectedUser)\r\n        if((senderId===selfUser.userID && reciverId===selectedUser.userID)|| (senderId===selectedUser.userID && reciverId===selfUser.userID)){\r\n            console.log(\"done\")\r\n           \r\n           return <div key={idx} className={isSent(ele)}>\r\n                       <span>{ele.content}</span>\r\n                    </div>\r\n        }\r\n    }\r\n    // console.log(\"msgList: \",msgList);\r\n    return (\r\n        <div className=\"content\">\r\n            <ol>\r\n                {msgList.length > 0 && msgList.map((ele,idx) => {\r\n                    return renderMessage(ele,idx)\r\n                })\r\n                }\r\n            </ol>\r\n        </div>\r\n    );\r\n}\r\nexport default RenderMessages;","C:\\Users\\mohinder\\Desktop\\temp\\react-temp-project\\src\\ChatApp\\SelectedUser.js",[],"C:\\Users\\mohinder\\Desktop\\temp\\react-temp-project\\src\\Material-ui\\HiddenPage.js",[],"C:\\Users\\mohinder\\Desktop\\temp\\react-temp-project\\src\\App.js",["41"],"C:\\Users\\mohinder\\Desktop\\temp\\react-temp-project\\src\\Material-ui\\MaterialUI.js",[],"C:\\Users\\mohinder\\Desktop\\temp\\react-temp-project\\src\\Material-ui\\ClassPage.js",["42"],"import React, { PureComponent } from 'react'\r\n\r\nclass ClassPage extends React.Component {\r\n    constructor(props) {\r\n        super(props)\r\n\r\n        this.state = {\r\n            user:\"mohinder\"\r\n        }\r\n        console.log(\"constur\")\r\n        // this.handleClick=this.handleClick.bind(this);\r\n    }\r\n    UNSAFE_componentWillMount(){\r\n        console.log(\"cwillmount\")\r\n    }\r\n    componentDidMount() {\r\n        console.log(\"cdm\")\r\n    }\r\n    componentWillUnmount(){\r\n        console.log(\"cwillunmount\")\r\n    }\r\n    UNSAFE_componentWillUpdate(){\r\n        console.log(\"cwillupdate\")\r\n    }\r\n    shouldComponentUpdate(prevProps){\r\n        console.log(\"shouldcomponentupdate\")\r\n        console.log(\"prevPRops: \",prevProps===this.props)\r\n        return true;\r\n    }\r\n    componentDidUpdate(){\r\n        console.log(\"cdu\")\r\n    }\r\n    show() {\r\n        console.log(\"this: \",this.state.user);\r\n        return <p>hello</p>\r\n    }\r\n    handleClick=(e)=>{\r\n        console.log(\"button clicked\",e.target)\r\n        this.setState({user:\"singh\"})\r\n    }\r\n    render() {\r\n        console.log(\"rednder\")\r\n        return (\r\n            <div>\r\n                class component\r\n                {this.state.user}\r\n                {this.show()}\r\n\r\n                <button onClick={this.handleClick}>\r\n                    click\r\n                </button>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default ClassPage",{"ruleId":"43","severity":1,"message":"44","line":1,"column":17,"nodeType":"45","messageId":"46","endLine":1,"endColumn":25},{"ruleId":"47","severity":1,"message":"48","line":29,"column":8,"nodeType":"49","endLine":29,"endColumn":37,"suggestions":"50"},{"ruleId":"43","severity":1,"message":"51","line":84,"column":11,"nodeType":"45","messageId":"46","endLine":84,"endColumn":19},{"ruleId":"43","severity":1,"message":"52","line":1,"column":17,"nodeType":"45","messageId":"46","endLine":1,"endColumn":26},{"ruleId":"43","severity":1,"message":"53","line":8,"column":8,"nodeType":"45","messageId":"46","endLine":8,"endColumn":10},{"ruleId":"43","severity":1,"message":"54","line":1,"column":17,"nodeType":"45","messageId":"46","endLine":1,"endColumn":30},"no-unused-vars","'Fragment' is defined but never used.","Identifier","unusedVar","react-hooks/exhaustive-deps","React Hook useEffect has missing dependencies: 'handleMessage' and 'handleNewUser'. Either include them or remove the dependency array.","ArrayExpression",["55"],"'showUser' is assigned a value but never used.","'useEffect' is defined but never used.","'SC' is defined but never used.","'PureComponent' is defined but never used.",{"desc":"56","fix":"57"},"Update the dependencies array to be: [isConnected, users, msgList, handleMessage, handleNewUser]",{"range":"58","text":"59"},[1228,1257],"[isConnected, users, msgList, handleMessage, handleNewUser]"]
